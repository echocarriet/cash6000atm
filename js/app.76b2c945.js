(function(){var t={4858:function(t,e,a){"use strict";var o=a(9242),r=a(4161),n=a(6423),s=a(5410),i=a.n(s),c=a(3396);function l(t,e,a,o,r,n){const s=(0,c.up)("router-view");return(0,c.wg)(),(0,c.j4)(s)}var h=a(1373);const d=(0,h.Z)();var m=d,u=a(3153),p=a.n(u),f=a(3872),g=a.n(f),w={provide(){return{emitter:m,L:p(),control:g()}}},y=a(89);const b=(0,y.Z)(w,[["render",l]]);var v=b,_=a(2483);const T=t=>((0,c.dD)("data-v-164ddd58"),t=t(),(0,c.Cn)(),t),D={class:"container-fluid shadow"},x={class:"container py-3"},$=T((()=>(0,c._)("i",{class:"bi bi-geo-fill"},null,-1))),k={class:"bg-layoutColor py-5"},A={class:"container"},C=T((()=>(0,c._)("h2",{class:"h3 text-center mb-4"},"ATM 卡片資訊",-1))),S={class:"bg-mapColor py-5"},L=T((()=>(0,c._)("h2",{class:"h3 text-center mb-4",id:"goMap"},"ATM 地圖資訊",-1)));function O(t,e,a,o,r,n){const s=(0,c.up)("HeaderTemplate"),i=(0,c.up)("SelectArea"),l=(0,c.up)("AtmItem"),h=(0,c.up)("MapAtm"),d=(0,c.up)("FooterTemplate"),m=(0,c.up)("TopButton");return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c._)("div",D,[(0,c._)("div",x,[(0,c.Wm)(s),(0,c.Wm)(i),(0,c._)("button",{class:"btn btn-primary ms-auto d-block",onClick:e[0]||(e[0]=t=>n.goAnchor("#goMap"))},[$,(0,c.Uk)(" 地圖 ")])])]),(0,c._)("div",k,[(0,c._)("div",A,[C,(0,c.Wm)(l)])]),(0,c._)("div",S,[L,(0,c.Wm)(h)]),(0,c.Wm)(d),(0,c.Wm)(m)],64)}var M=a.p+"img/logo.fdb3ab98.svg";const N={class:"h3 text-center"},K=(0,c._)("span",{class:"text-end"},"全民共享",-1),j=(0,c._)("img",{class:"img-fluid mx-auto mb-4",src:M,alt:"全民共享普發現金6000ATM",style:{width:"100px"}},null,-1),U=(0,c._)("span",null,"普發現金",-1),z=[K,j,U];function H(t,e){return(0,c.wg)(),(0,c.iD)("h1",N,z)}const I={},B=(0,y.Z)(I,[["render",H]]);var Z=B,E=a(7139);const P={class:"row"},Y={class:"col-md-4"},V=(0,c._)("option",{selected:"",disabled:"",value:"chooseCity"},"請選擇縣市",-1),W=["value"],q={class:"col-md-4"},J=(0,c._)("option",{selected:"",disabled:"",value:"chooseTown"},"請選擇區域",-1),R=["value"],X={class:"col-md-4"},F=["disabled"];function G(t,e,a,r,n,s){return(0,c.wg)(),(0,c.iD)("div",P,[(0,c._)("div",Y,[(0,c._)("select",{class:"form-select form-select-lg mb-3","aria-label":".form-select-lg example",ref:"selectCity",onChange:e[0]||(e[0]=(...t)=>s.renderTown&&s.renderTown(...t))},[V,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(n.cityNameData,(t=>((0,c.wg)(),(0,c.iD)("option",{value:t.City,key:t},(0,E.zw)(t.CityName),9,W)))),128))],544)]),(0,c._)("div",q,[(0,c._)("select",{class:"form-select form-select-lg mb-3","aria-label":".form-select-lg example",ref:"selectTown",onChange:e[1]||(e[1]=(...t)=>s.render6000Atm&&s.render6000Atm(...t))},[J,((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(n.townNameData,(t=>((0,c.wg)(),(0,c.iD)("option",{value:t.TownName,key:t},(0,E.zw)(t.TownName),9,R)))),128))],544)]),(0,c._)("div",X,[(0,c.wy)((0,c._)("input",{type:"search",class:"form-control form-control-lg mb-3",placeholder:"搜尋","aria-label":"searchKey","onUpdate:modelValue":e[2]||(e[2]=t=>n.searchKey=t),disabled:s.showDisabled,onInput:e[3]||(e[3]=(...t)=>s.filterSearch&&s.filterSearch(...t))},null,40,F),[[o.nr,n.searchKey,void 0,{trim:!0}]])])])}a(7658);var Q={inject:["emitter"],data(){return{cityNameData:[],townNameData:[],atmData:[],atm6000Data:[],searchKey:"",cityNameTw:""}},methods:{getAuthorizationHeader(){const t="https://tdx.transportdata.tw/auth/realms/TDXConnect/protocol/openid-connect/token",e={grant_type:"client_credentials",client_id:"echocarriet-41862442-553b-4ba0",client_secret:"5f758588-2300-4e44-8cb6-31e9acf2e3ad"};this.$http({method:"POST",url:t,dataType:"JSON",headers:{"content-type":"application/x-www-form-urlencoded"},data:this.$qs.stringify(e)}).then((t=>{this.$http.defaults.headers.common.Authorization=`Bearer ${t.data.access_token}`,this.getAllCity()})).catch((t=>{console.log(t)}))},getAllCity(){const t="https://tdx.transportdata.tw/api/basic/v2/Basic/City?%24format=JSON";this.$http(t).then((t=>{this.cityNameData=t.data})).catch((t=>{console.log(t)}))},getTown(){const t="https://tdx.transportdata.tw/auth/realms/TDXConnect/protocol/openid-connect/token",e={grant_type:"client_credentials",client_id:"echocarriet-41862442-553b-4ba0",client_secret:"5f758588-2300-4e44-8cb6-31e9acf2e3ad"};this.$http({method:"POST",url:t,dataType:"JSON",headers:{"content-type":"application/x-www-form-urlencoded"},data:this.$qs.stringify(e)}).then((t=>{this.$http.defaults.headers.common.Authorization=`Bearer ${t.data.access_token}`;const e=`https://tdx.transportdata.tw/api/basic/v2/Basic/City/${this.$refs.selectCity.value}/Town?%24format=JSON`;this.$http(e).then((t=>{this.townNameData=t.data,this.cityNameData.forEach((t=>{this.$refs.selectCity.value===t.City&&(this.cityNameTw=t.CityName)}))})).catch((t=>{console.log(t)}))})).catch((t=>{console.log(t)}))},renderTown(){this.$refs.selectTown.value="chooseTown",this.atm6000Data=[],this.searchKey="",this.getTown(),this.emitter.emit("emit-render6000Atm",this.atm6000Data),this.emitter.emit("emit-search",this.searchKey)},get6000Atm(){const t="https://raw.githubusercontent.com/echocarriet/cash6000atm/main/public/js/6000Atm.json";this.$http.get(t).then((t=>{this.atmData=t.data})).catch((t=>{console.log(t)}))},render6000Atm(){this.atm6000Data=[],this.searchKey="",this.atmData.forEach((t=>{let e="";if("N"===t.服務型態?e="9:00~15:30":"E"===t.服務型態?e="9:00~22:00":"9"===t.服務型態&&(e="24 小時營業"),this.$refs.selectTown.value===t.鄉鎮縣市別&&this.cityNameTw===t.所屬縣市){const a={data:t,mapURL:`https://www.google.com/maps/place/${t.座標Y軸},${t.座標X軸}`,openingHour:e,searchValue:`${t.所屬銀行簡稱}${t.裝設地點}${t.地址}`};this.atm6000Data.push(a)}})),this.emitter.emit("emit-render6000Atm",this.atm6000Data),this.emitter.emit("emit-search",this.searchKey)},filterSearch(){this.emitter.emit("emit-search",this.searchKey)}},computed:{showDisabled(){return 0===this.atm6000Data.length?1:0}},mounted(){this.getAuthorizationHeader(),this.get6000Atm()}};const tt=(0,y.Z)(Q,[["render",G]]);var et=tt;const at={key:0,class:"row g-3 list-unstyled"},ot={class:"card"},rt={class:"card-header h5"},nt={class:"card-body"},st={class:"card-text"},it=(0,c._)("i",{class:"bi bi-geo-alt-fill"},null,-1),ct=["href"],lt={class:"card-text"},ht=(0,c._)("i",{class:"bi bi-clock-fill"},null,-1),dt={key:1},mt=(0,c._)("p",{class:"text-center text-muted"},"目前尚無卡片式資料，請先至上方選取縣市與區域",-1),ut=[mt];function pt(t,e,a,o,r,n){return 0!==r.atm6000Data.length?((0,c.wg)(),(0,c.iD)("ul",at,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(n.filterSearch,(t=>((0,c.wg)(),(0,c.iD)("li",{class:"col-md-6",key:t},[(0,c._)("div",ot,[(0,c._)("h3",rt,(0,E.zw)(`${t.data.所屬銀行簡稱} | ${t.data.裝設地點}`),1),(0,c._)("div",nt,[(0,c._)("p",st,[it,(0,c.Uk)(" "+(0,E.zw)(`${t.data.所屬縣市}${t.data.鄉鎮縣市別}${t.data.地址} | `)+" ",1),(0,c._)("a",{class:"link-underline-light",href:t.mapURL,target:"_blank"},"開啟導航",8,ct)]),(0,c._)("p",lt,[ht,(0,c.Uk)(" "+(0,E.zw)(`${t.openingHour}`),1)])])])])))),128))])):((0,c.wg)(),(0,c.iD)("div",dt,ut))}var ft={inject:["emitter"],props:["propsSearchKey"],data(){return{atm6000Data:[],searchKey:""}},mounted(){this.emitter.on("emit-render6000Atm",(t=>{this.atm6000Data=t})),this.emitter.on("emit-search",(t=>{this.searchKey=t}))},computed:{filterSearch(){return this.atm6000Data.filter((t=>t.searchValue.match(this.searchKey)))}}};const gt=(0,y.Z)(ft,[["render",pt]]);var wt=gt;const yt=t=>((0,c.dD)("data-v-18660671"),t=t(),(0,c.Cn)(),t),bt=yt((()=>(0,c._)("p",{class:"text-muted text-center mb-2"},"✦ 請開啟定位並允許存取位置資訊",-1))),vt=yt((()=>(0,c._)("p",{class:"text-muted text-center mb-4"},"可縮放地圖查看篩選後的區域 ATM，點擊黃色圖示可顯示 ATM 資訊",-1))),_t=yt((()=>(0,c._)("div",{id:"map",class:"position-relative"},null,-1)));function Tt(t,e,a,o,r,n){return(0,c.wg)(),(0,c.iD)(c.HY,null,[bt,vt,_t],64)}var Dt=a(4870),xt={inject:["emitter","L","control"],data(){return{atm6000Data:[],searchKey:"",osm:null}},methods:{getNowLocation(){navigator.geolocation.getCurrentPosition((t=>{console.log(`經度:${t.coords.latitude}, 緯度:${t.coords.longitude}`);const e=t.coords.latitude,a=t.coords.longitude;this.leafletMap(e,a)}))},leafletMap(t,e){const a=this.L.map("map").setView([t,e],15);this.L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(a),this.L.circle([t,e],{color:"red",fillColor:"#f03",fillOpacity:.5,radius:150}).bindPopup("<b>您目前所在位置 ✌️</b>").addTo(a).openPopup(),this.osm=a,this.L.control.locate().addTo((0,Dt.IU)(this.osm)).start()},clearMarkers(){(0,Dt.IU)(this.osm).eachLayer((t=>{t instanceof this.L.Marker&&(0,Dt.IU)(this.osm).removeLayer(t)}))},atmLeafletMap(){const t=this.L.icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-gold.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});this.filterSearch.forEach((e=>{const a=e.data.座標Y軸,o=e.data.座標X軸;this.L.marker([a,o],{icon:t}).bindPopup(`<h3 class="h5">${e.data.所屬銀行簡稱} | ${e.data.裝設地點}</h3>\n            <p>\n              <i class="bi bi-geo-alt-fill"></i>\n              ${e.data.所屬縣市}${e.data.鄉鎮縣市別}${e.data.地址}  | \n              <a class="link-underline-light" href="${e.mapURL}" target="_blank">導航</a>\n            </p>\n            <p>\n            <i class="bi bi-clock-fill"></i> ${e.openingHour}  \n            </p>`).addTo((0,Dt.IU)(this.osm)),(0,Dt.IU)(this.osm).panTo(this.L.latLng([a,o]))}))}},mounted(){this.getNowLocation(),this.emitter.on("emit-render6000Atm",(t=>{this.atm6000Data=t})),this.emitter.on("emit-search",(t=>{this.searchKey=t}))},computed:{filterSearch(){return this.atm6000Data.filter((t=>t.searchValue.match(this.searchKey)))}},watch:{filterSearch(){this.clearMarkers(),this.atmLeafletMap()}}};const $t=(0,y.Z)(xt,[["render",Tt],["__scopeId","data-v-18660671"]]);var kt=$t;const At={class:"text-center text-muted fs-7 py-3"},Ct=(0,c._)("ul",{class:"list-unstyled d-flex justify-content-center mb-0"},[(0,c._)("li",{class:"footer-item me-3"},[(0,c._)("p",{class:"footer-divider mb-0"},"© 2023 Carrie Tseng")]),(0,c._)("li",null,[(0,c._)("a",{class:"link-underline-light link-secondary",href:"https://github.com/echocarriet/cash6000atm",target:"_blank"}," Github Repository ")])],-1),St=[Ct];function Lt(t,e){return(0,c.wg)(),(0,c.iD)("footer",At,St)}const Ot={},Mt=(0,y.Z)(Ot,[["render",Lt]]);var Nt=Mt;const Kt=t=>((0,c.dD)("data-v-1f861326"),t=t(),(0,c.Cn)(),t),jt=Kt((()=>(0,c._)("i",{class:"bi bi-arrow-up text-primary h5"},null,-1))),Ut=[jt];function zt(t,e,a,o,r,n){return(0,c.wg)(),(0,c.iD)("button",{onClick:e[0]||(e[0]=(...t)=>n.scrollToTop&&n.scrollToTop(...t)),ref:"topButton",class:"topButton"},Ut,512)}var Ht={methods:{userScroll(){const t=this.$refs.topButton;window.scrollY>0?t.classList.add("showButton"):t.classList.remove("showButton")},scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}},beforeMount(){window.removeEventListener("scroll",this.userScroll)},mounted(){window.addEventListener("scroll",this.userScroll)}};const It=(0,y.Z)(Ht,[["render",zt],["__scopeId","data-v-1f861326"]]);var Bt=It,Zt={components:{HeaderTemplate:Z,SelectArea:et,AtmItem:wt,MapAtm:kt,FooterTemplate:Nt,TopButton:Bt},methods:{goAnchor(t){document.querySelector(t).scrollIntoView({behavior:"smooth"})}}};const Et=(0,y.Z)(Zt,[["render",O],["__scopeId","data-v-164ddd58"]]);var Pt=Et;const Yt=[{path:"/",name:"home",component:Pt}],Vt=(0,_.p7)({history:(0,_.r5)(),routes:Yt});var Wt=Vt;const qt=(0,o.ri)(v);qt.use(n.Z,r.Z),qt.config.globalProperties.$qs=i(),qt.use(Wt),qt.mount("#app")},4654:function(){}},e={};function a(o){var r=e[o];if(void 0!==r)return r.exports;var n=e[o]={id:o,loaded:!1,exports:{}};return t[o].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.m=t,function(){a.amdO={}}(),function(){var t=[];a.O=function(e,o,r,n){if(!o){var s=1/0;for(h=0;h<t.length;h++){o=t[h][0],r=t[h][1],n=t[h][2];for(var i=!0,c=0;c<o.length;c++)(!1&n||s>=n)&&Object.keys(a.O).every((function(t){return a.O[t](o[c])}))?o.splice(c--,1):(i=!1,n<s&&(s=n));if(i){t.splice(h--,1);var l=r();void 0!==l&&(e=l)}}return e}n=n||0;for(var h=t.length;h>0&&t[h-1][2]>n;h--)t[h]=t[h-1];t[h]=[o,r,n]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var o in e)a.o(e,o)&&!a.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.hmd=function(t){return t=Object.create(t),t.children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t}}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.p="/cash6000atm/"}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,o){var r,n,s=o[0],i=o[1],c=o[2],l=0;if(s.some((function(e){return 0!==t[e]}))){for(r in i)a.o(i,r)&&(a.m[r]=i[r]);if(c)var h=c(a)}for(e&&e(o);l<s.length;l++)n=s[l],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return a.O(h)},o=self["webpackChunkcash6000atm"]=self["webpackChunkcash6000atm"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=a.O(void 0,[998],(function(){return a(4858)}));o=a.O(o)})();
//# sourceMappingURL=app.76b2c945.js.map